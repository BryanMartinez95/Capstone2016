<div layout>
    <md-content flex layout-padding>
        <md-card flex>
            <form name="addSample">
                <div class="md-toolbar-tools">
                    <h2>Sample -
                        <small>New</small>
                    </h2>
                    <span flex></span>
                    {{sample.status | toRegularCase}}&nbsp;
                    <md-switch md-no-ink class="md-hue-1" title="Status" name="status" ng-model="sample.status"
                               aria-label="Status" ng-true-value="'ACTIVE'" ng-false-value="'INACTIVE'">
                    </md-switch>
                    <md-button class="md-icon-button" aria-label="Refresh" ng-click="refresh()">
                        <md-tooltip md-direction="down">
                            Refresh
                        </md-tooltip>
                        <md-icon class="fa fa-refresh fa-2x">
                        </md-icon>
                    </md-button>
                </div>
                <div layout class="md-padding">
                    <md-input-container flex="50">
                        <label for="labId">Lab ID</label>
                        <input id="labId" name="labId" type="text" ng-model="sample.labId" required autocomplete="off">
                        <div ng-messages="addSample.labId.$error">
                            <div ng-message="required">A lab ID for the sample is required.</div>
                        </div>
                    </md-input-container>
                    <md-input-container flex="50">
                        <md-button ng-click="goToEditDate($event)" aria-label="Date">
                            <md-tooltip>
                                Edit
                            </md-tooltip>
                            <span flex>{{sample.date | dateFilter}}</span>
                        </md-button>
                    </md-input-container>
                </div>
                <div layout class="md-padding">
                    <span flex><label>Sample Identifier</label></span>
                </div>
                <div layout class="md-padding">
                    <md-input-container flex="33">
                        <label for="companyName">Company Name</label>
                        <input id="companyName" name="companyName" maxlength="4" ng-model="sample.companyName"
                               ng-pattern="/^[a-zA-Z0-9]{3,4}$/"
                               flex autocomplete="off">
                        <div ng-messages="addSample.companyName.$error">
                            <div ng-message="pattern">Company name must be a combination of 3-4 letters or numbers.
                            </div>
                        </div>
                    </md-input-container>
                    <md-input-container flex="33">
                        <label for="creationDate">Creation Date</label>
                        <input id="creationDate" name="creationDate" ng-pattern="/^[a-zA-Z0-9]{4}$/" maxlength="4"
                               ng-model="sample.creationDate" flex autocomplete="off">
                        <div ng-messages="addSample.creationDate.$error">
                            <div ng-message="pattern">Creation date must be a combination of 4 letters or numbers.</div>
                        </div>
                    </md-input-container>
                    <md-input-container flex="33">
                        <label for="sampleIdentity">Sample Identity</label>
                        <input id="sampleIdentity" name="sampleIdentity" ng-pattern="/^[a-zA-Z0-9]{4}$/" maxlength="4"
                               ng-model="sample.sampleIdentity" flex autocomplete="off">
                        <div ng-messages="addSample.sampleIdentity.$error">
                            <div ng-message="pattern">Sample identity must be a combination of 4 letters or numbers.
                            </div>
                        </div>
                    </md-input-container>
                </div>
                <div layout class="md-padding">
                    <md-input-container flex="50">
                        <label>Device</label>
                        <md-select placeholder="Device" ng-model="sample.device" aria-label="Device" required>
                            <md-option ng-value="device" ng-repeat="device in deviceOptions">{{device.display}}
                            </md-option>
                        </md-select>
                    </md-input-container>
                    <md-input-container flex="50">
                        <label>Project</label>
                        <md-select placeholder="Project" ng-model="sample.project" aria-label="Project">
                            <md-option ng-value="project" ng-repeat="project in projectOptions">{{project.display}}
                            </md-option>
                        </md-select>
                    </md-input-container>
                </div>
                <div layout class="md-padding">
                    <md-input-container flex>
                        <label for="comment">Comment</label>
                        <textarea id="comment" ng-model="sample.comment" rows="5" md-select-on-focus></textarea>
                    </md-input-container>
                </div>
            </form>
        </md-card>
    </md-content>
    <div flex="10" flex-gt-md="5" layout="column" class="sidebar">
        <md-button class="md-fab md-primary" ng-click="createSample()" ng-disabled="addSample.$invalid  || sample.device.value == null">
            <span ng-class="icons.save"></span>
            <md-tooltip md-direction="left">
                <span class="fab-text">Save</span>
            </md-tooltip>
        </md-button>
        <md-button class="md-fab" ng-click="cancel()">
            <span ng-class="icons.cancel"></span>
            <md-tooltip md-direction="left">
                <span class="fab-text">Cancel</span>
            </md-tooltip>
        </md-button>
    </div>
</div>